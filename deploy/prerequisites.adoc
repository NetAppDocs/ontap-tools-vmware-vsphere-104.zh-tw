---
permalink: deploy/prerequisites.html 
sidebar: sidebar 
keywords: ONTAP tools,Storage Replication Adapter 
summary: 在部署ONTAP tools for VMware vSphere之前，您應該熟悉部署套件的空間需求和一些基本的主機系統需求。 
---
= ONTAP tools for VMware vSphere的要求和設定限制
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
在部署ONTAP tools for VMware vSphere之前，您應該熟悉部署套件的空間需求和一些基本的主機系統需求。

您可以將適用ONTAP tools for VMware vSphere與 VMware vCenter Server Virtual Appliance (vCSA) 合併使用。您應該在包含 ESXi 系統的受支援的 vSphere 用戶端上部署ONTAP tools for VMware vSphere。



== 系統需求

* *每個節點的安裝包空間需求*
+
** 精簡配置安裝需要 15 GB
** 厚配置安裝需要 348 GB


* *主機系統大小需求* 依部署大小建議的記憶體如下表所示。要部署高可用性 (HA)，您將需要表中指定的三倍設備大小。


|===


| *部署類型* | *每個節點的 CPU 數量* | *每個節點的記憶體（GB）* | *每個節點厚配置的磁碟空間（GB）* 


| 小的 | 9 | 18 | 350 


| 中等的 | 13 | 26 | 350 


| 大型注意：大型部署僅適用於 HA 配置。 | 17 | 34 | 350 
|===

NOTE: 啟用備份後，每個ONTAP工具叢集都需要在部署虛擬機器的資料儲存上額外 50 GB 的空間。因此，非 HA 需要 400 GB，而 HA 總共需要 1100 GB 的空間。



== 最低儲存和應用要求

|===
| 儲存、主機和應用程式 | 版本要求 


| ONTAP | 9.14.1、9.15.1、9.16.0、9.16.1 和 9.16.1P3 FAS、 ASA A 系列、 ASA C 系列、 AFF A 系列、 AFF C 系列和ASA r2。 


| ONTAP工具支援的 ESXi 主機 | 7.0.3 及更高版本 


| ONTAP工具支援 vCenter Server | 7.0U3 以上版本 


| VASA 提供者 | 3.0 


| OVA 應用程式 | 10.4 


| ESXi 主機部署ONTAP工具虛擬機 | 7.0U3 和 8.0U3 


| vCenter Server 部署ONTAP工具虛擬機 | 7.0 和 8.0 
|===

NOTE: 從適用於ONTAP tools for VMware vSphere開始，虛擬機器硬體從版本 10 變更為 17。

互通性表工具 (IMT) 包含有關ONTAP、vCenter Server、ESXi 主機和插件應用程式的支援版本的最新資訊。

https://imt.netapp.com/matrix/imt.jsp?components=105475;&solution=1777&isHWU&src=IMT["互通性矩陣工具"^]



== 端口要求

下表概述了NetApp所使用的網路連接埠及其用途。連接埠分為三種類型：

* 外部連接埠：這些連接埠可以從 Kubernetes 叢集或節點外部存取。它們允許服務與外部網路或用戶通信，從而實現與叢集環境之外的系統整合。
* 節點間連接埠：這些連接埠允許 Kubernetes 叢集內的節點之間進行通訊。它們是叢集任務（例如資料共享和協同工作）所必需的。對於單節點部署，節點間連接埠僅在節點內部使用，不需要外部存取。節點間連接埠可以接受來自叢集外部的流量。使用防火牆規則阻止節點間連接埠存取網際網路。
* 內部連接埠：這些連接埠使用 ClusterIP 位址在 Kubernetes 叢集內部進行通訊。它們不會對外暴露，因此無需添加到防火牆規則中。



NOTE: 確保所有ONTAP工具節點位於同一子網，以保持彼此之間不間斷的通訊。


|===
| *服務/元件名稱* | *港口* | *協定* | *連接埠類型* | *描述* 


| ntv-gateway-svc (LB) | 443、8443 | TCP | 外部的 | 用於 VASA 提供者服務的傳入通訊的直通連接埠。VASA 提供者自簽章憑證和自訂 CA 憑證託管在此連接埠上。 


| SSH | 22 | TCP | 外部的 | 用於遠端伺服器登入和命令執行的安全性外殼協定 (Secure Shell)。 


| rke2 伺服器 | 9345 | TCP | 節點間 | RKE2 監管 API（僅限受信任網路）。 


| kube-apiserver | 6443 | TCP | 節點間 | Kubernetes API 伺服器連接埠（僅限受信任的網路）。 


| rpcbind/連接埠映射器 | 111 | TCP/UDP | 節點間 | 用於服務間的 RPC 通訊。 


| coredns（DNS） | 53 | TCP/UDP | 節點間 | 叢集內用於名稱解析的網域名稱系統 (DNS) 服務。 


| NTP | 123 | UDP | 節點間 | 網路時間協定（NTP）用於時間同步。 


| etcd | 2379、2380、2381 | TCP | 節點間 | 用於儲存叢集資料的鍵值儲存。 


| kube-vip | 2112 | TCP | 節點間 | Kubernetes API 伺服器連接埠。 


| kubelet | 10248、10250 | TCP | 節點間 | Kubernetes 元件 


| kube-controller | 10257 | TCP | 節點間 | Kubernetes 元件 


| 雲端控制器 | 10258 | TCP | 節點間 | Kubernetes 元件 


| kube-scheduler | 10259 | TCP | 節點間 | Kubernetes 元件 


| kube-proxy | 10249、10256 | TCP | 節點間 | Kubernetes 元件 


| 加州節點 | 9091、9099 | TCP | 節點間 | Calico 網路組件。 


| containerd | 10010 | TCP | 節點間 | 容器守護程式服務。 


| VXLAN（法蘭絨） | 8472 | UDP | 節點間 | 用於 pod 通訊的覆蓋網路。 
|===

NOTE: 對於高可用性部署，請確保所有節點之間都已開啟 UDP 連接埠 8472。此連接埠支援跨節點的 pod 間通訊；阻塞此連接埠將中斷節點間網路連線。



== ONTAP tools for VMware vSphere的設定限制

您可以使用下表作為指南來ONTAP tools for VMware vSphere。

|===


| 部署 | *類型* | vVols數量 | *主機數量* 


| 非HA | 小號（S） | ~12K | 32 


| 非HA | 中號（M） | ~24K | 64 


| 高可用性 | 小號（S） | ~24K | 64 


| 高可用性 | 中號（M） | ~5萬 | 128 


| 高可用性 | 大號（L） | ~10萬 | 256 [注意] 表中的主機數量顯示來自多個 vCenter 的主機總數。 
|===


== ONTAP tools for VMware vSphere- 儲存複製適配器 (SRA)

下表顯示了使用適用ONTAP tools for VMware vSphere的每個 VMware Live Site Recovery 實例支援的數量。

|===
| vCenter 部署規模 | *小的* | *中等的* 


| 配置使用基於陣列的複製進行保護的虛擬機器總數 | 2000 | 5000 


| 基於陣列的複製保護群組總數 | 250 | 250 


| 每個恢復計劃的保護組總數 | 50 | 50 


| 複製資料儲存的數量 | 255 | 255 


| 虛擬機器數量 | 4000 | 7000 
|===
下表顯示了 VMware Live Site Recovery 的數量以及與 ONTAP tools for VMware vSphere。

|===


| *VMware Live Site Recovery 實例數量* | * ONTAP工具部署規模* 


| 最多 4 | 小的 


| 4 至 8 | 中等的 


| 超過8 | 大的 
|===
有關更多信息，請參閱 https://techdocs.broadcom.com/us/en/vmware-cis/live-recovery/live-site-recovery/9-0/overview/site-recovery-manager-system-requirements/operational-limits-of-site-recovery-manager.html["VMware Live Site Recovery 的操作限制"] 。
